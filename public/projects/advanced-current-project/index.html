<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Advanced Text Analysis and Generation Project | Abir Arsalane</title>
<meta name="keywords" content="LLM, AI, GenAI, Hugging Face, RAG, Fine-tuning, Python">
<meta name="description" content="I&#39;m building an Advanced Text Analysis and Generation Project">
<meta name="author" content="">
<link rel="canonical" href="https://abirarsalane.github.io/projects/advanced-current-project/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.2b833c6baa7a96407c2417c7a4049985b42c21cccc2472abf4603967eafd2273.css" integrity="sha256-K4M8a6p6lkB8JBfHpASZhbQsIczMJHKr9GA5Z&#43;r9InM=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.2eadbb982468c11a433a3e291f01326f2ba43f065e256bf792dbd79640a92316.js" integrity="sha256-Lq27mCRowRpDOj4pHwEybyukPwZeJWv3ktvXlkCpIxY="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://abirarsalane.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://abirarsalane.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://abirarsalane.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://abirarsalane.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://abirarsalane.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://abirarsalane.github.io/projects/advanced-current-project/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:title" content="Advanced Text Analysis and Generation Project" />
<meta property="og:description" content="I&#39;m building an Advanced Text Analysis and Generation Project" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://abirarsalane.github.io/projects/advanced-current-project/" />
<meta property="og:image" content="https://abirarsalane.github.io/projects/loading/loading.png" /><meta property="article:section" content="projects" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://abirarsalane.github.io/projects/loading/loading.png" />
<meta name="twitter:title" content="Advanced Text Analysis and Generation Project"/>
<meta name="twitter:description" content="I&#39;m building an Advanced Text Analysis and Generation Project"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Projects",
      "item": "https://abirarsalane.github.io/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Advanced Text Analysis and Generation Project",
      "item": "https://abirarsalane.github.io/projects/advanced-current-project/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Advanced Text Analysis and Generation Project",
  "name": "Advanced Text Analysis and Generation Project",
  "description": "I'm building an Advanced Text Analysis and Generation Project",
  "keywords": [
    "LLM", "AI", "GenAI", "Hugging Face", "RAG", "Fine-tuning", "Python"
  ],
  "articleBody": "Advanced Text Analysis and Generation Project Project Overview Disclaimer: This project is still under construction. More updates will be added to this page later. If you want to contribute, ask, or talk about it, feel free to reach out!\nThis project is a sophisticated demonstration of advanced Natural Language Processing (NLP) and deep learning techniques. The goal is to create a comprehensive text analysis and generation system that leverages state-of-the-art language models and cutting-edge methodologies. This project exemplifies the ability to handle complex data preprocessing, model training, fine-tuning, hyperparameter optimization, model evaluation, and deployment processes.\nObjectives Data Collection: Aggregate and process large-scale, diverse text datasets to create a rich training corpus. Data Preprocessing: Implement advanced techniques for text cleaning, normalization, tokenization, and augmentation to prepare high-quality input data. Model Training: Utilize state-of-the-art language models and advanced training techniques to build robust NLP systems. Hyperparameter Tuning: Conduct rigorous hyperparameter optimization to enhance model performance and efficiency. Model Evaluation: Apply robust evaluation metrics to assess model performance comprehensively. Model Interpretability: Use interpretability tools to gain insights into model behavior and ensure transparency. Deployment: Deploy the trained model using modern deployment platforms to enable real-time inference and interaction. Technologies Used Python: The primary programming language for implementing all project components. Hugging Face Transformers: A powerful library for accessing and utilizing state-of-the-art NLP models. Datasets Library: Facilitates efficient handling and processing of large-scale datasets. SentencePiece: Tokenizer and text processor for handling subword units, enhancing model’s ability to understand text. Optuna: A hyperparameter optimization framework that systematically improves model performance. SHAP (SHapley Additive exPlanations): A tool for interpreting machine learning models and visualizing their predictions. Gradio: A library for creating interactive user interfaces for machine learning models, simplifying deployment and usage. scikit-learn: Utilized for data splitting, evaluation metrics, and other utility functions. Models Used T5 (Text-To-Text Transfer Transformer): A versatile model from Hugging Face capable of performing various NLP tasks by framing them as text-to-text problems. BERT (Bidirectional Encoder Representations from Transformers): A pre-trained model from Hugging Face used for understanding the context within text, essential for tasks like text classification and entity recognition. GPT-4 (Generative Pre-trained Transformer 4): An advanced model used for text generation tasks, capable of producing human-like text based on the given input. Datasets Common Crawl: A vast and diverse web corpus that provides extensive training data, ensuring the model learns from a wide variety of text. Custom Web Scraped Data: Additional data collected through web scraping from multiple websites to enrich the training dataset and improve model robustness. Methodologies Data Preprocessing Text Cleaning: Implementing techniques to remove HTML tags, special characters, and normalize text to lower case, ensuring data consistency. Data Augmentation: Employing methods such as back-translation (translating text to another language and back), synonym replacement, and noise injection to enhance data diversity and model generalization. Tokenization: Using SentencePiece for subword tokenization, enabling better handling of rare words and improving the model’s understanding of text. Model Training and Fine-Tuning Mixed Precision Training: Utilizing half-precision floating-point format to speed up training and reduce memory usage, facilitated by frameworks like PyTorch. Distributed Training: Leveraging multiple GPUs to parallelize training, significantly reducing training time and improving efficiency. Hyperparameter Tuning Optuna: Conducting hyperparameter optimization using Optuna, systematically exploring the hyperparameter space to identify the optimal settings for learning rate, batch size, and epochs. Model Evaluation BLEU (Bilingual Evaluation Understudy): A metric for evaluating the quality of text generation, especially useful in translation tasks. ROUGE (Recall-Oriented Understudy for Gisting Evaluation): A set of metrics for evaluating summarization and text generation by comparing overlaps with reference outputs. Model Interpretability SHAP: Using SHAP to interpret model predictions, providing insights into the contribution of each feature to the output, ensuring model transparency and trustworthiness. Deployment Gradio: Creating an interactive web interface using Gradio, enabling users to interact with the model in real-time, generating text based on user input and displaying results instantly. Conclusion This advanced text analysis and generation project integrates the latest models, cutting-edge technologies, and sophisticated methodologies to demonstrate expertise in NLP and deep learning. By showcasing capabilities in data collection, preprocessing, model training, hyperparameter optimization, evaluation, and deployment, this project exemplifies a comprehensive and professional approach to building state-of-the-art NLP systems. The use of open-source tools and models ensures accessibility and reproducibility, making it a valuable addition to any AI portfolio.\n",
  "wordCount" : "716",
  "inLanguage": "en",
  "image":"https://abirarsalane.github.io/projects/loading/loading.png","datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://abirarsalane.github.io/projects/advanced-current-project/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Abir Arsalane",
    "logo": {
      "@type": "ImageObject",
      "url": "https://abirarsalane.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header sticky-header">
    <nav class="nav">
        <div class="logo">
            <a href="https://abirarsalane.github.io/" accesskey="h" title="Abir Arsalane (Alt + H)">Abir Arsalane</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://abirarsalane.github.io/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://abirarsalane.github.io/blog" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://abirarsalane.github.io/projects" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="https://abirarsalane.github.io/experience" title="Experience">
                    <span>Experience</span>
                </a>
            </li>
            <li>
                <a href="https://abirarsalane.github.io/achievements" title="Achievements">
                    <span>Achievements</span>
                </a>
            </li>
            <li>
                <a href="https://abirarsalane.github.io/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://abirarsalane.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://abirarsalane.github.io/projects/">Projects</a></div>
    <h1 class="post-title">
      Advanced Text Analysis and Generation Project
    </h1>
    <div class="post-description">
      I&#39;m building an Advanced Text Analysis and Generation Project
    </div>
    <div class="post-meta">


June 2024

</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://abirarsalane.github.io/projects/loading/loading.png" alt="">
        
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">‎ Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#advanced-text-analysis-and-generation-project" aria-label="Advanced Text Analysis and Generation Project">Advanced Text Analysis and Generation Project</a><ul>
                        
                <li>
                    <a href="#project-overview" aria-label="Project Overview">Project Overview</a></li>
                <li>
                    <a href="#objectives" aria-label="Objectives">Objectives</a></li>
                <li>
                    <a href="#technologies-used" aria-label="Technologies Used">Technologies Used</a></li>
                <li>
                    <a href="#models-used" aria-label="Models Used">Models Used</a></li>
                <li>
                    <a href="#datasets" aria-label="Datasets">Datasets</a></li>
                <li>
                    <a href="#methodologies" aria-label="Methodologies">Methodologies</a><ul>
                        
                <li>
                    <a href="#data-preprocessing" aria-label="Data Preprocessing">Data Preprocessing</a></li>
                <li>
                    <a href="#model-training-and-fine-tuning" aria-label="Model Training and Fine-Tuning">Model Training and Fine-Tuning</a></li>
                <li>
                    <a href="#hyperparameter-tuning" aria-label="Hyperparameter Tuning">Hyperparameter Tuning</a></li>
                <li>
                    <a href="#model-evaluation" aria-label="Model Evaluation">Model Evaluation</a></li>
                <li>
                    <a href="#model-interpretability" aria-label="Model Interpretability">Model Interpretability</a></li>
                <li>
                    <a href="#deployment" aria-label="Deployment">Deployment</a></li></ul>
                </li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="advanced-text-analysis-and-generation-project">Advanced Text Analysis and Generation Project<a hidden class="anchor" aria-hidden="true" href="#advanced-text-analysis-and-generation-project">#</a></h1>
<h2 id="project-overview">Project Overview<a hidden class="anchor" aria-hidden="true" href="#project-overview">#</a></h2>
<p><strong>Disclaimer:</strong> This project is still under construction. More updates will be added to this page later. If you want to contribute, ask, or talk about it, feel free to reach out!</p>
<p>This project is a sophisticated demonstration of advanced Natural Language Processing (NLP) and deep learning techniques. The goal is to create a comprehensive text analysis and generation system that leverages state-of-the-art language models and cutting-edge methodologies. This project exemplifies the ability to handle complex data preprocessing, model training, fine-tuning, hyperparameter optimization, model evaluation, and deployment processes.</p>
<h2 id="objectives">Objectives<a hidden class="anchor" aria-hidden="true" href="#objectives">#</a></h2>
<ul>
<li><strong>Data Collection</strong>: Aggregate and process large-scale, diverse text datasets to create a rich training corpus.</li>
<li><strong>Data Preprocessing</strong>: Implement advanced techniques for text cleaning, normalization, tokenization, and augmentation to prepare high-quality input data.</li>
<li><strong>Model Training</strong>: Utilize state-of-the-art language models and advanced training techniques to build robust NLP systems.</li>
<li><strong>Hyperparameter Tuning</strong>: Conduct rigorous hyperparameter optimization to enhance model performance and efficiency.</li>
<li><strong>Model Evaluation</strong>: Apply robust evaluation metrics to assess model performance comprehensively.</li>
<li><strong>Model Interpretability</strong>: Use interpretability tools to gain insights into model behavior and ensure transparency.</li>
<li><strong>Deployment</strong>: Deploy the trained model using modern deployment platforms to enable real-time inference and interaction.</li>
</ul>
<h2 id="technologies-used">Technologies Used<a hidden class="anchor" aria-hidden="true" href="#technologies-used">#</a></h2>
<ul>
<li><strong>Python</strong>: The primary programming language for implementing all project components.</li>
<li><strong>Hugging Face Transformers</strong>: A powerful library for accessing and utilizing state-of-the-art NLP models.</li>
<li><strong>Datasets Library</strong>: Facilitates efficient handling and processing of large-scale datasets.</li>
<li><strong>SentencePiece</strong>: Tokenizer and text processor for handling subword units, enhancing model&rsquo;s ability to understand text.</li>
<li><strong>Optuna</strong>: A hyperparameter optimization framework that systematically improves model performance.</li>
<li><strong>SHAP (SHapley Additive exPlanations)</strong>: A tool for interpreting machine learning models and visualizing their predictions.</li>
<li><strong>Gradio</strong>: A library for creating interactive user interfaces for machine learning models, simplifying deployment and usage.</li>
<li><strong>scikit-learn</strong>: Utilized for data splitting, evaluation metrics, and other utility functions.</li>
</ul>
<h2 id="models-used">Models Used<a hidden class="anchor" aria-hidden="true" href="#models-used">#</a></h2>
<ul>
<li><strong>T5 (Text-To-Text Transfer Transformer)</strong>: A versatile model from Hugging Face capable of performing various NLP tasks by framing them as text-to-text problems.</li>
<li><strong>BERT (Bidirectional Encoder Representations from Transformers)</strong>: A pre-trained model from Hugging Face used for understanding the context within text, essential for tasks like text classification and entity recognition.</li>
<li><strong>GPT-4 (Generative Pre-trained Transformer 4)</strong>: An advanced model used for text generation tasks, capable of producing human-like text based on the given input.</li>
</ul>
<h2 id="datasets">Datasets<a hidden class="anchor" aria-hidden="true" href="#datasets">#</a></h2>
<ul>
<li><strong>Common Crawl</strong>: A vast and diverse web corpus that provides extensive training data, ensuring the model learns from a wide variety of text.</li>
<li><strong>Custom Web Scraped Data</strong>: Additional data collected through web scraping from multiple websites to enrich the training dataset and improve model robustness.</li>
</ul>
<h2 id="methodologies">Methodologies<a hidden class="anchor" aria-hidden="true" href="#methodologies">#</a></h2>
<h3 id="data-preprocessing">Data Preprocessing<a hidden class="anchor" aria-hidden="true" href="#data-preprocessing">#</a></h3>
<ul>
<li><strong>Text Cleaning</strong>: Implementing techniques to remove HTML tags, special characters, and normalize text to lower case, ensuring data consistency.</li>
<li><strong>Data Augmentation</strong>: Employing methods such as back-translation (translating text to another language and back), synonym replacement, and noise injection to enhance data diversity and model generalization.</li>
<li><strong>Tokenization</strong>: Using SentencePiece for subword tokenization, enabling better handling of rare words and improving the model&rsquo;s understanding of text.</li>
</ul>
<h3 id="model-training-and-fine-tuning">Model Training and Fine-Tuning<a hidden class="anchor" aria-hidden="true" href="#model-training-and-fine-tuning">#</a></h3>
<ul>
<li><strong>Mixed Precision Training</strong>: Utilizing half-precision floating-point format to speed up training and reduce memory usage, facilitated by frameworks like PyTorch.</li>
<li><strong>Distributed Training</strong>: Leveraging multiple GPUs to parallelize training, significantly reducing training time and improving efficiency.</li>
</ul>
<h3 id="hyperparameter-tuning">Hyperparameter Tuning<a hidden class="anchor" aria-hidden="true" href="#hyperparameter-tuning">#</a></h3>
<ul>
<li><strong>Optuna</strong>: Conducting hyperparameter optimization using Optuna, systematically exploring the hyperparameter space to identify the optimal settings for learning rate, batch size, and epochs.</li>
</ul>
<h3 id="model-evaluation">Model Evaluation<a hidden class="anchor" aria-hidden="true" href="#model-evaluation">#</a></h3>
<ul>
<li><strong>BLEU (Bilingual Evaluation Understudy)</strong>: A metric for evaluating the quality of text generation, especially useful in translation tasks.</li>
<li><strong>ROUGE (Recall-Oriented Understudy for Gisting Evaluation)</strong>: A set of metrics for evaluating summarization and text generation by comparing overlaps with reference outputs.</li>
</ul>
<h3 id="model-interpretability">Model Interpretability<a hidden class="anchor" aria-hidden="true" href="#model-interpretability">#</a></h3>
<ul>
<li><strong>SHAP</strong>: Using SHAP to interpret model predictions, providing insights into the contribution of each feature to the output, ensuring model transparency and trustworthiness.</li>
</ul>
<h3 id="deployment">Deployment<a hidden class="anchor" aria-hidden="true" href="#deployment">#</a></h3>
<ul>
<li><strong>Gradio</strong>: Creating an interactive web interface using Gradio, enabling users to interact with the model in real-time, generating text based on user input and displaying results instantly.</li>
</ul>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>This advanced text analysis and generation project integrates the latest models, cutting-edge technologies, and sophisticated methodologies to demonstrate expertise in NLP and deep learning. By showcasing capabilities in data collection, preprocessing, model training, hyperparameter optimization, evaluation, and deployment, this project exemplifies a comprehensive and professional approach to building state-of-the-art NLP systems. The use of open-source tools and models ensures accessibility and reproducibility, making it a valuable addition to any AI portfolio.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://abirarsalane.github.io/tags/llm/">LLM</a></li>
      <li><a href="https://abirarsalane.github.io/tags/ai/">AI</a></li>
      <li><a href="https://abirarsalane.github.io/tags/genai/">GenAI</a></li>
      <li><a href="https://abirarsalane.github.io/tags/hugging-face/">Hugging Face</a></li>
      <li><a href="https://abirarsalane.github.io/tags/rag/">RAG</a></li>
      <li><a href="https://abirarsalane.github.io/tags/fine-tuning/">Fine-Tuning</a></li>
      <li><a href="https://abirarsalane.github.io/tags/python/">Python</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://abirarsalane.github.io/">Abir Arsalane</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
